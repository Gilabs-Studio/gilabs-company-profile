---
import { pricingData } from '../data/pricing';
import { ArrowRight } from 'lucide-react';
import ParallaxGallery from './ui/ParallaxGallery';
import { LottieIcon } from './ui/LottieIcon';

const { lang } = Astro.props;
const about = pricingData[lang].about;
const process = pricingData[lang].process;
const energy = pricingData[lang].energy;

// Lottie icon paths for energy cards
const energyIcons = [
  '/icon/strategic-consulting.json',
  '/icon/discuss.json',
  '/icon/enterprise-development.json',
  '/icon/award.json',
];

// Gallery images - Optimized with smaller sizes and WebP format
// Using w=400 for better performance (reduced from 800)
const galleryImages = [
  // Column 1
  'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1497215842964-222b430dc094?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&q=75&auto=format&fit=crop',
  // Column 2
  'https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1531482615713-2afd69097998?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1606857521015-7f9fcf423571?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&q=75&auto=format&fit=crop',
  // Column 3
  'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1553877522-43269d4ea984?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1521737711867-e3b97375f902?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?w=400&q=75&auto=format&fit=crop',
  // Column 4
  'https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=400&q=75&auto=format&fit=crop',
  'https://images.unsplash.com/photo-1556761175-b413da4baf72?w=400&q=75&auto=format&fit=crop',
];

// Energy card data for cleaner iteration
const energyCards = [
  { 
    titleEn: 'Curiosity', 
    titleId: 'Rasa Ingin Tahu',
    descEn: 'We ask questions. We explore. We learn.',
    descId: 'Kami bertanya. Kami menjelajah. Kami belajar.'
  },
  { 
    titleEn: 'Jokes & Fun', 
    titleId: 'Candaan & Fun',
    descEn: 'Laughter keeps us creative and connected.',
    descId: 'Tertawa membuat kami kreatif dan terhubung.'
  },
  { 
    titleEn: 'Late Nights', 
    titleId: 'Larut Malam',
    descEn: 'When the best ideas come alive.',
    descId: 'Saat ide terbaik muncul.'
  },
  { 
    titleEn: 'Shared Vibes', 
    titleId: 'Vibe Bersama',
    descEn: 'Playlists that fuel our flow.',
    descId: 'Playlist yang memicu alur kerja kami.'
  },
];
---

<section id="about" class="relative border-b border-border/50 bg-background">
  {/* Text Section - "Here's a sneak peek" */}
  <section id="sneak-peek">
    <div class="container mx-auto px-4">
    </div>
  </section>

  {/* Parallax Gallery Section */}
  <section id="design-showcase" class="relative bg-background flex items-center justify-center overflow-hidden z-10 w-full">
    <ParallaxGallery client:load images={galleryImages} lang={lang} />
  </section>

  <div class="container mx-auto px-4 py-24 md:py-32">
    {/* Process Section - Minimalist White Background */}
    <section class="mb-32">
      {/* Header with generous whitespace */}
      <div class="max-w-3xl mx-auto text-center mb-20">
        <p class="text-xs font-medium uppercase tracking-widest text-muted-foreground mb-4">
          {process.subtitle}
        </p>
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-foreground">
          {process.title}
        </h2>
      </div>

      {/* Process Steps - Centered Card Layout */}
      <div class="max-w-5xl mx-auto">
        <div class="grid md:grid-cols-3 gap-6 md:gap-12">
          {process.body.map((step: string, index: number) => (
            <div class="group relative text-center">
              {/* Step number - centered */}
              <div class="flex justify-center mb-6">
                <span class="flex items-center justify-center w-14 h-14 text-2xl font-bold text-foreground border-2 border-foreground rounded-full transition-colors group-hover:bg-foreground group-hover:text-background">
                  {index + 1}
                </span>
              </div>
              {/* Step content - centered */}
              <p class="text-lg md:text-xl text-foreground leading-relaxed">
                {step}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>

    {/* Energy Section - Bento Grid Layout */}
    <section class="relative">
      {/* Header */}
      <div class="text-center mb-16">
        <p class="text-xs font-medium uppercase tracking-widest text-muted-foreground mb-4">
          {energy.subtitle}
        </p>
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-foreground mb-6">
          {energy.title}
        </h2>
        <p class="text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto">
          {energy.body[0]}
        </p>
      </div>

      {/* Bento Grid */}
      <div class="grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-6">
        {/* Large featured card - spans 8 cols - BLACK */}
        <div class="md:col-span-8 bg-foreground text-background rounded-3xl p-8 md:p-12 relative overflow-hidden group">
          <div class="relative z-10">
            <div class="w-20 h-20 mb-8">
              <LottieIcon 
                client:visible 
                src={energyIcons[0]} 
                className="w-full h-full invert"
              />
            </div>
            <h3 class="text-2xl md:text-3xl font-bold mb-4">
              {lang === 'en' ? energyCards[0].titleEn : energyCards[0].titleId}
            </h3>
            <p class="text-lg text-background/80 max-w-md leading-relaxed">
              {lang === 'en' ? energyCards[0].descEn : energyCards[0].descId}
            </p>
            <p class="mt-6 text-sm text-background/60 leading-relaxed max-w-lg">
              {energy.body[1]}
            </p>
          </div>
          {/* Decorative element */}
          <div class="absolute -right-20 -bottom-20 w-64 h-64 bg-background/10 rounded-full transition-transform duration-500 group-hover:scale-110" />
        </div>

        {/* Stacked cards - spans 4 cols */}
        <div class="md:col-span-4 flex flex-col gap-4 md:gap-6">
          {/* Card 2 - BLACK */}
          <div class="flex-1 bg-foreground text-background rounded-3xl p-6 md:p-8 group hover:bg-foreground/90 transition-colors">
            <div class="w-14 h-14 mb-4">
              <LottieIcon 
                client:visible 
                src={energyIcons[1]} 
                className="w-full h-full invert"
              />
            </div>
            <h3 class="text-xl font-bold mb-2">
              {lang === 'en' ? energyCards[1].titleEn : energyCards[1].titleId}
            </h3>
            <p class="text-sm text-background/70 leading-relaxed">
              {lang === 'en' ? energyCards[1].descEn : energyCards[1].descId}
            </p>
          </div>
          {/* Card 3 - BLACK */}
          <div class="flex-1 bg-foreground text-background rounded-3xl p-6 md:p-8 group hover:bg-foreground/90 transition-colors">
            <div class="w-14 h-14 mb-4">
              <LottieIcon 
                client:visible 
                src={energyIcons[2]} 
                className="w-full h-full invert"
              />
            </div>
            <h3 class="text-xl font-bold mb-2">
              {lang === 'en' ? energyCards[2].titleEn : energyCards[2].titleId}
            </h3>
            <p class="text-sm text-background/70 leading-relaxed">
              {lang === 'en' ? energyCards[2].descEn : energyCards[2].descId}
            </p>
          </div>
        </div>

        {/* Bottom row - two equal cards */}
        {/* Card 4 - BLACK */}
        <div class="md:col-span-6 bg-foreground text-background rounded-3xl p-6 md:p-8 group hover:bg-foreground/90 transition-colors">
          <div class="flex items-start gap-6">
            <div class="w-16 h-16 shrink-0">
              <LottieIcon 
                client:visible 
                src={energyIcons[3]} 
                className="w-full h-full invert"
              />
            </div>
            <div>
              <h3 class="text-xl font-bold mb-2">
                {lang === 'en' ? energyCards[3].titleEn : energyCards[3].titleId}
              </h3>
              <p class="text-sm text-background/70 leading-relaxed">
                {lang === 'en' ? energyCards[3].descEn : energyCards[3].descId}
              </p>
            </div>
          </div>
        </div>

        {/* CTA - Brutalist Style */}
        <a 
          href="#contact" 
          class="md:col-span-6 group flex items-center justify-center rounded-3xl border-2 border-foreground hover:bg-foreground hover:text-background transition-colors duration-300"
        >
          <span class="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight py-12 md:py-16">
            {lang === 'en' ? 'Start Your Project' : 'Mulai Proyek Anda'}
            <ArrowRight className="inline-block w-8 h-8 md:w-10 md:h-10 ml-3 transition-transform group-hover:translate-x-2" />
          </span>
        </a>
      </div>
    </section>
  </div>
</section>
